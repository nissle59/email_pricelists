from typing import Self, TYPE_CHECKING

import ttkbootstrap as ttk
from ttkbootstrap.constants import *
from ttkbootstrap.toast import ToastNotification

from parser import PriceParserApp

if TYPE_CHECKING:
    from ui.gui import App


def launch_price_parser():
    """Запускает парсер в дочернем окне с сохранением стилей"""
    ToastNotification(
        title="Запуск парсера",
        message="Парсер цен запускается...",
        duration=2000
    ).show_toast()

    # Инициализируем парсер в этом окне
    PriceParserApp(parent=ttk.Toplevel(title="Парсер цен"))


def create_settings_frame(self, notebook):
    tab_settings = ttk.Frame(notebook)
    notebook.add(tab_settings, text="⚙️ Настройки")

    ttk.Label(
        tab_settings,
        text="Добро пожаловать!",
        font=("Helvetica", 18, "bold")
    ).pack(pady=40)

    ttk.Button(
        tab_settings,
        text="Нажми меня",
        bootstyle="success-outline",
        command=launch_price_parser
    ).pack(pady=10)
